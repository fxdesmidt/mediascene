/*
 ADOBE CONFIDENTIAL
 ___________________

 Copyright 2013 Adobe Systems Incorporated
 All Rights Reserved.

 NOTICE:  All information contained herein is, and remains
 the property of Adobe Systems Incorporated and its suppliers,
 if any.  The intellectual and technical concepts contained
 herein are proprietary to Adobe Systems Incorporated and its
 suppliers and may be covered by U.S. and Foreign Patents,
 patents in process, and are protected by trade secret or copyright law.
 Dissemination of this information or reproduction of this material
 is strictly forbidden unless prior written permission is obtained
 from Adobe Systems Incorporated.
*/
!function(t){var e=t("#page"),i=t(window),s=function(t,e,i){this.service=t,this.elem=e,this.data=i,this.cssProxy=this.service.cssProxy,this.enabled=i&&0<i.length,this.visible=!0,this.isMarkedAsOOV=!1,this.hasPreInitClass=this.elem.hasClass(s.HIDDEN_CLASS)};s.HIDDEN_CLASS="mse_pre_init",s.prototype.clone=function(t){t.hasClass(s.HIDDEN_CLASS)||t.addClass(s.HIDDEN_CLASS),t.registerGenericScrollEffect(s,this.data)},s.prototype.initialize=function(){this.referenceOffset=this.data[0]["in"][1],this.elemWidth=this.elem.innerWidth(),this.elemHeight=this.elem.innerHeight(),this.skipVisibleCheck=this.elemWidth<1;for(var t,e,i=0;e=this.data[i];i++)e.length=e["in"][1]-e["in"][0],e.startPosition=t?{left:t.startPosition.left+t.length*t.speed[0],top:t.startPosition.top+t.length*t.speed[1]}:{left:-e.length*e.speed[0],top:-e.length*e.speed[1]},t=e},s.prototype.update=function(t,e,i){var o=this.elementLeft-i.scrollLeft,r=this.elementTop-this.referenceOffset,n=t.startPosition.left+t.speed[0]*e,e=t.startPosition.top+t.speed[1]*e,a={};"number"==typeof t.speed[0]&&(a.left=o+n+"px"),"number"==typeof t.speed[1]&&(a.top=r-e+"px"),(this.visible=this.skipVisibleCheck||this.getVisible(o+n,r-e,i))?(this.isMarkedAsOOV&&(a.display="",this.isMarkedAsOOV=!1),this.cssProxy.setCSSProperties(this.elem,a)):this.isMarkedAsOOV||(this.cssProxy.setCSSProperties(this.elem,{display:"none"}),this.isMarkedAsOOV=!0),this.hasPreInitClass&&(this.elem.removeClass(s.HIDDEN_CLASS),this.hasPreInitClass=!1)},s.prototype.getVisible=function(t,e,i){var s=Math.max(this.elemWidth,this.elemHeight)+100;return(void 0===t||t+s>0&&t-s<i.windowWidth)&&(void 0===e||e+s>0&&e-s<i.windowHeight)};var o=function(t,e,i){this.service=t,this.elem=e,this.data=i,this.cssProxy=this.service.cssProxy,this.r7Mode=!0,!this.r7Mode&&(this.cssBackgroundPosition=this.elem.css("background-position"),this.cssBackgroundPosition.match(/^\d+\%$/gi))&&(this.cssBackgroundPosition=(t=this.elem[0].currentStyle)&&t.backgroundPositionX&&t.backgroundPositionY?t.backgroundPositionX+" "+t.backgroundPositionY:Muse.Utils.getRuleProperty(this.getCSSRule(),"background-position")),this.useBackgroundFixedOptimization()&&(this.elem.css("background-attachment","fixed"),this.r7Mode&&(this.enabled=!1),this.backgroundFixedMode=!0),this.elem.data("hasBackgroundPositionScrollEffect",!0)};o.BG_NORMAL=0,o.BG_COVER=1,o.BG_CONTAIN=2,o.prototype.getCSSRule=function(){return this.pageSheet||(this.pageStyleSheet=Muse.Utils.getPageStyleSheet()),this.cssRule||(this.cssRule=Muse.Utils.getStyleSheetRuleById(this.pageStyleSheet,this.elem.attr("id"))),this.cssRule},o.prototype.useBackgroundFixedOptimization=function(){return i.data("scrollWrapper").isStandard()?0==this.data[0].speed[0]&&0==this.data[0].speed[1]&&0==this.data[1].speed[0]&&0==this.data[1].speed[1]:!1},o.prototype.initialize=function(){this.referenceOffset=this.data[0]["in"][1];var e=this.elem.parent();this.is100PercentWidth=e.hasClass("browser_width"),this.hasPositionEffect=(this.positionEffect=this.service.getElementEffect(this.is100PercentWidth?e:this.elem,s))&&this.positionEffect.enabled;for(var o,r,e=0;o=this.data[e];e++)o.speed[0]-=0,o.speed[1]-=1,o.length=o["in"][1]-o["in"][0],o.startPosition=null==r?{left:-o.length*o.speed[0],top:-o.length*o.speed[1]}:{left:r.startPosition.left+r.length*r.speed[0],top:r.startPosition.top+r.length*r.speed[1]},r=o;!Muse.Browser.Features.checkCSSFeature("background-size")&&this.elem.hasClass("museBGSize")&&0<t("> .museBgSizePolyfill",this.elem).length&&(this.polyfillElement=t(t(".museBgSizePolyfill img",this.elem)[0])),this.bgMode=this.getBgMode(),this.backgroundOffsetAvailable=!1,this.elem.resize(this,this.onElementResize),this.is100PercentWidth&&i.resize(this,this.onWindowResize),this.backgroundPosition=this.getBackgroundPosition(),this.getBackgroundOffset(),this.elem.hasClass("browser_width")&&(this.originalWidth=Muse.Utils.tryParse(Muse.Utils.getRuleProperty(this.getCSSRule(),"width"),parseInt))},o.prototype.onWindowResize=function(t){t.data.recalculateBackgroundOffset=!0},o.prototype.onElementResize=function(t){var t=t.data,e=t.service.getEffectProgress(),i=t.service.getEffectInterval(t,e);t.update(i,e-i["in"][0])},o.prototype.hasOriginalWidth=function(){return Muse.Utils.isDefined(this.originalWidth)&&-1!=this.originalWidth},o.prototype.getDeltaWidth=function(){return this.hasOriginalWidth()?(this.elem.innerWidth()-this.originalWidth)*this.backgroundPosition.multiplier.x:0},o.prototype.getBackgroundModeDisplayRatio=function(){switch(this.bgMode){case o.BG_CONTAIN:return Math.min(this.elem.innerWidth()/this.backgroundSize.width,this.elem.innerHeight()/this.backgroundSize.height);case o.BG_COVER:return Math.max(this.elem.innerWidth()/this.backgroundSize.width,this.elem.innerHeight()/this.backgroundSize.height);default:return 1}},o.prototype.updateFixedBackground=function(t,e){var i=this.getBackgroundModeDisplayRatio(),s=this.elem.offset(),r=s.left,n=s.top-this.referenceOffset;(this.hasPositionEffect&&0==this.positionEffect.data[this.data.indexOf(t)].speed[1]||!this.hasPositionEffect&&"fixed"==this.elem.css("position"))&&(n=s.top-(t["in"][0]+e)),s=(o.BG_COVER===this.bgMode&&this.is100PercentWidth?0:r)+this.backgroundPosition.multiplier.x*(this.elem.width()-i*this.backgroundSize.width)+Muse.Utils.getCSSIntValue(this.elem,"border-left-width"),n=n+this.backgroundPosition.multiplier.y*(this.elem.height()-i*this.backgroundSize.height)+Muse.Utils.getCSSIntValue(this.elem,"border-top-width"),n={"background-position":s+"px "+n+"px"},1!=i&&(n["background-size"]=i*this.backgroundSize.width+"px "+i*this.backgroundSize.height+"px"),this.cssProxy.setCSSProperties(this.elem,n)},o.prototype.update=function(t,e){if(this.backgroundOffsetAvailable)if(this.recalculateBackgroundOffset&&(this.recalculateBackgroundOffset=!1,this.getBackgroundOffset()),this.backgroundFixedMode)this.updateFixedBackground(t,e);else{var i=this.getBackgroundModeDisplayRatio()-1,s=Math.floor(this.bgOffset.x-i*this.backgroundPosition.multiplier.x*this.backgroundSize.width+this.getDeltaWidth())+t.startPosition.left+t.speed[0]*e,i=Math.floor(this.bgOffset.y-i*this.backgroundPosition.multiplier.y*this.backgroundSize.height)-(t.startPosition.top+t.speed[1]*e);this.polyfillElement?(s={"margin-left":s+"px","margin-top":i+"px",left:0,top:0},this.cssProxy.setCSSProperties(this.polyfillElement,s)):(s={"background-attachment":"scroll","background-position":s+"px "+i+"px"},this.cssProxy.setCSSProperties(this.elem,s))}else this.updateRequested=!0},o.prototype.getBackgroundOffset=function(){var t=Muse.Utils.tryParse(this.backgroundPosition.x,parseFloat,0),e=Muse.Utils.tryParse(this.backgroundPosition.y,parseFloat,0);if(Muse.Utils.endsWith(this.backgroundPosition.x,"%")||Muse.Utils.endsWith(this.backgroundPosition.y,"%"))if(this.backgroundSize)this.updateBackgroundOffset(t,e);else{var i=this;this.getBackgroundSize(function(s){if(i.backgroundSize=s,i.updateBackgroundOffset(t,e),i.updateRequested){i.updateRequested=!1;var s=i.service.getEffectProgress(),o=i.service.getEffectInterval(i,s);i.update(o,s-o["in"][0])}})}else this.onBackgroundOffsetAvailable(t,e)},o.prototype.updateBackgroundOffset=function(t,e){var i=this.is100PercentWidth&&this.hasPositionEffect&&this.positionEffect.isMarkedAsOOV?this.elem.parent():this.elem;if(Muse.Utils.endsWith(this.backgroundPosition.x,"%"))var s=Muse.Utils.firstDefined(this.originalWidth,i.innerWidth()),t=t/100*(s-Muse.Utils.firstDefined(this.backgroundSize.width,s));Muse.Utils.endsWith(this.backgroundPosition.y,"%")&&(i=i.innerHeight(),e=e/100*(i-Muse.Utils.firstDefined(this.backgroundSize.height,i))),this.onBackgroundOffsetAvailable(t,e)},o.prototype.onBackgroundOffsetAvailable=function(t,e){this.bgOffset={x:t,y:e},this.backgroundOffsetAvailable=!0},o.prototype.getBgMode=function(){var t=(this.elem.get(0).currentStyle||window.getComputedStyle(this.elem.get(0),null))["background-size"]||this.elem.css("background-size");return t&&t.match?t.match(/cover/gi)?o.BG_COVER:t.match(/contain/)?o.BG_CONTAIN:o.BG_NORMAL:o.BG_NORMAL},o.prototype.isValidBackgroundPosition=function(t){return Muse.Utils.endsWith(t,"%")||Muse.Utils.endsWith(t,"px")},o.prototype.getBackgroundPosition=function(){var t=this.cssBackgroundPosition?this.cssBackgroundPosition:this.elem.css("background-position");switch(t){case"top":case"bottom":t="center "+t;break;case"0%":case"50%":case"100%":t+=" center"}if(!t){var e=this.elem.css("background-position-x"),i=this.elem.css("background-position-y");e&&(t=e+" "+(i||""))}return t&&t.split?(t=t.replace(/(?:left|top)/gi,"0%").replace(/center/gi,"50%").replace(/(?:right|bottom)/gi,"100%"),t=t.replace(/^\s+|\s+$/gi,""),t=t.split(" "),1==t.length&&t.push("50%"),this.isValidBackgroundPosition(t[0])&&this.isValidBackgroundPosition(t[1])?{x:t[0],y:t[1],multiplier:{x:Muse.Utils.endsWith(t[0],"%")?Muse.Utils.tryParse(t[0],parseInt,0)/100:0,y:Muse.Utils.endsWith(t[1],"%")?Muse.Utils.tryParse(t[1],parseInt,0)/100:0}}:void Muse.Assert.fail("Invalid measurement unit for background position. Expecting px or %.")):{x:"0%",y:"0%"}},o.prototype.getBackgroundSize=function(e){var i=this.polyfillElement?this.polyfillElement.attr("src"):this.elem.css("background-image");if(i||i.replace){var i=i.replace(/^url\("?|"?\)$/gi,""),s=new Image;t(s).one("load",function(){e({width:s.width,height:s.height})}),s.src=i}else e()};var r=function(t,e,i){this.service=t,this.elem=e,this.data=i};r.prototype.update=function(){};var n=function(t,e,i){this.service=t,this.elem=e,this.data=i,this.cssProxy=this.service.cssProxy,this.elemToBeMarkedAsInvisible=this.elem.parent().hasClass("browser_width")?this.elem.parent():this.elem,this.hasPreInitClass=this.elem.hasClass(n.PRE_INITIT_CLASS_NAME)};n.PRE_INITIT_CLASS_NAME="ose_pre_init",n.INVISIBLE_CLASS_NAME="ose_ei",n.prototype.initialize=function(){Muse.Assert.assert(3==this.data.length,"Opacity Scroll Effect should have 3 intervals");var t=this.data[0],e=this.data[1],i=this.data[2];0<t.fade&&(t["in"][1]-=t.fade,this.data.splice(1,0,{"in":[t["in"][1],t["in"][1]+t.fade],opacity:[t.opacity,e.opacity],rate:(e.opacity-t.opacity)/t.fade})),0<i.fade&&(i["in"][0]+=i.fade,this.data.splice(this.data.length-1,0,{"in":[i["in"][0]-i.fade,i["in"][0]],opacity:[e.opacity,i.opacity],rate:(i.opacity-e.opacity)/i.fade})),this.hasPositionEffect=(this.positionEffect=this.service.getElementEffect(this.elem,s))&&this.positionEffect.enabled},n.prototype.setElementOpacity=function(t){this.cssProxy.setCSSProperties(this.elem,{opacity:t/100,filter:"alpha(opacity="+t+")"});var e=0===t;(void 0===this.previousOpacity||e&&0!==this.previousOpacity||!e&&0===this.previousOpacity)&&(e?this.elemToBeMarkedAsInvisible.addClass(n.INVISIBLE_CLASS_NAME):this.elemToBeMarkedAsInvisible.removeClass(n.INVISIBLE_CLASS_NAME)),this.previousOpacity=t},n.prototype.update=function(t,e){var i=0;(!this.hasPositionEffect||this.positionEffect.visible)&&(i="number"!=typeof t.opacity?t.opacity[0]+t.rate*e:t.opacity,i=Math.max(Math.min(i,100),0)),this.setElementOpacity(i),this.hasPreInitClass&&(this.elem.removeClass(n.PRE_INITIT_CLASS_NAME),this.hasPreInitClass=!1)};var a=function(t,e,i){this.service=t,this.elem=e,this.data=i,this.widget=this.elem.data("widget"),this.lastDisplayedSlide=0,this.lastInterval=null};a.prototype.initialize=function(){this.noOfSlides=this.widget.slides.$element.length,(this.isLinkToScrollEffect=this.isLinkToScrollInterval(this.data[1]))&&(this.data[1].intervalLength=this.data[1]["in"][1]-this.data[1]["in"][0],Muse.Assert.assert(2==this.data.length||1/0!=this.data[1].intervalLength,"In a 3 interval configuration, why do we have middle interval with length = Infinity?"))},a.prototype.update=function(t,e){if(this.play!==t.play&&(!0===t.play?(this.play=!0,this.start()):!1===t.play?(this.play=!1,this.stop()):this.isLinkToScrollInterval(t)?(this.play=void 0,this.jump(e)):Muse.Assert.assert(!1,"Unknown widget configuration: play="+t.play)),!1===t.play&&this.isLinkToScrollEffect&&t!==this.lastInterval)switch(this.data.indexOf(t)){case 0:this.jump(0);break;case 2:this.jump(this.data[1].intervalLength);break;default:Muse.Assert.assert(!1,"Why is the second interval using a play:false setting?")}this.lastInterval=t},a.prototype.isLinkToScrollInterval=function(t){return"number"==typeof t.play},a.prototype.jump=function(t){var t=Math.floor(t/this.data[1].play),e=(t-this.lastDisplayedSlide)%this.noOfSlides;if(0!=e){for(var i=e>0?e:-e,s=0;i>s;s++)e>0?this.widget.next():this.widget.previous();this.lastDisplayedSlide=t}},a.prototype.start=function(){var e;t(this.widget).one("wp-slideshow-before-play",function(){e=this.options.displayInterval,this.options.displayInterval=0}),t(this.widget).one("wp-slideshow-play",function(){Muse.Assert.assert(void 0!==e,"Why do we got a play event fired before beforePlay event?"),this.options.displayInterval=e}),this.widget.play()},a.prototype.stop=function(){this.widget.stop()};var l=function(t,e,i){this.service=t,this.elem=e,this.data=i,this.stage=null,this.play=!1,this.lastInterval=null};l.prototype.initialize=function(){if(this.data[1].intervalLength=this.data[1]["in"][1]-this.data[1]["in"][0],Muse.Assert.assert(2==this.data.length||1/0!=this.data[1].intervalLength,"In a 3 interval configuration, why do we have middle interval with length = Infinity?"),this.iframe=this.elem.children()[0],this.iframeWindow=this.iframe.contentWindow,this.iframeWindow.AdobeEdge)this.updateStage(this);else{var e=this;t(this.iframe).bind("load",function(){e.updateStage(e)})}},l.prototype.updateStage=function(t){t.iframeWindow.AdobeEdge.bootstrapCallback(function(e){t.onCompositionReady(e,t)})},l.prototype.onCompositionReady=function(t,e){e.stage=e.iframeWindow.AdobeEdge.compositions[t].getStage();for(var i in e.stage.timelines)e.stage.autoPlay[i]=!1;e.lastUpdateInterval&&e.lastUpdateIntervalProgress&&setTimeout(function(){e.update(e.lastUpdateInterval,e.lastUpdateIntervalProgress)},10)},l.prototype.update=function(t,e){if(this.stage){if(this.play!==t.play&&(!0===t.play?(this.play=!0,this.start()):!1===t.play?(this.play=!1,this.stop()):"number"==typeof t.play?(this.play=!0,this.seek(1e3*e/t.play)):Muse.Assert.assert(!1,"Unknown widget configuration: play="+t.play)),!1===t.play&&t!==this.lastInterval)switch(this.data.indexOf(t)){case 0:this.seek(0);break;case 2:this.seek(1e3*this.data[1].intervalLength/this.data[1].play);break;default:Muse.Assert.assert(!1,"Why is the second interval using a play:false setting?")}this.lastInterval=t}else this.lastUpdateInterval=t,this.lastUpdateIntervalProgress=e},l.prototype.start=function(){this.stage.play()},l.prototype.stop=function(){this.stage.stop(this.stage.getTimelinePosition())},l.prototype.seek=function(t){this.stage.seek(t%this.stage.getDuration())};var h=function(t){this.idGetterFn=t,this.mode=h.MODE_IMMEDIATE,this.cssPropsCache={},this.requestCSSUpdatePending=!1};h.MODE_IMMEDIATE=0,h.MODE_DELAYED=1,h.prototype.setModeDelayed=function(){window.webkitRequestAnimationFrame&&(this.mode=h.MODE_DELAYED)},h.prototype.getCacheForElement=function(t){var e=this.idGetterFn(t),i=this.cssPropsCache[e];return void 0===i&&(this.cssPropsCache[e]=i={style:t[0].style,appliedProps:{},queuedProps:{},hasQueuedProps:!1}),i},h.prototype.setCSSProperties=function(t,e){var i,s=this.getCacheForElement(t),o=!1,r=this;for(i in e)s.appliedProps[i]!==e[i]&&(s.queuedProps[i]=e[i],s.hasQueuedProps=o=!0);!this.requestCSSUpdatePending&&o&&(this.requestCSSUpdatePending=!0,h.MODE_DELAYED==this.mode?Muse.Utils.requestAnimationFrame(function(){r.doCSSUpdate()}):this.doCSSUpdate())},h.prototype.doCSSUpdate=function(){for(var t in this.cssPropsCache){var e=this.cssPropsCache[t];if(e.hasQueuedProps){for(var i in e.queuedProps)e.style[Muse.Utils.toCamelCase(i)]=e.appliedProps[i]=e.queuedProps[i];e.queuedProps={},e.hasQueuedProps=!1}}this.requestCSSUpdatePending=!1};var c=function(){this.effects=[],this.initialCSSProperties={},this.pagePaddingTop=Muse.Utils.tryParse(t("body").css("padding-top"),parseInt,0)+Muse.Utils.tryParse(t("#page").css("border-top-width"),parseInt,0),this.scrollY=this.scrollX=0,this.cssProxy=new h(this.getElemID)};c.TEMP_UID_ATTR="data-muse-tempuid",c.prototype.getEffectProgress=function(){return Math.max(0,this.scrollY)},c.prototype.getHorizontalScroll=function(){return this.scrollX-e.offset().left},c.prototype.getEnvironmentSettings=function(){return{windowWidth:window.innerWidth||i.width(),windowHeight:window.innerHeight||i.height(),scrollLeft:this.getHorizontalScroll()}},c.prototype.onUpdate=function(t,e){var i,s,o=0,r=this.getEnvironmentSettings();for(this.scrollX=t,this.scrollY=e,o=0;o<this.effects.length;o++)i=this.getEffectProgress(),s=this.getEffectInterval(this.effects[o],i),this.effects[o].update(s,i-s["in"][0],r)},c.prototype.getEffectInterval=function(t,e){for(var i,s=0;i=t.data[s]["in"];s++)if(i[0]<e&&e<=i[1])return t.data[s];return Muse.Assert.fail("Why do we have a progress value that does not fit in any interval?"),null},c.prototype.registerEffect=function(t,i,s){var o=this.getElemID(t),r=this,n=new i(this,t,s);!1!==n.enabled&&("undefined"==typeof this.initialCSSProperties[o]&&(this.initialCSSProperties[o]={left:Muse.Utils.tryParse(t.css("left"),parseInt,0)+Muse.Utils.tryParse(e.css("border-left-width"),parseInt,0),top:Muse.Utils.tryParse(t.css("top"),parseInt,0)+this.pagePaddingTop}),n.elementLeft=this.initialCSSProperties[o].left,n.elementTop=this.initialCSSProperties[o].top,n.type=i,n.data[0]["in"][0]=-100,n.initialize&&n.initialize(),setTimeout(function(){var t=r.getEffectProgress(),e=r.getEffectInterval(n,t);n.update(e,t-e["in"][0],r.getEnvironmentSettings())},0),this.effects.push(n))},c.prototype.getElementEffect=function(t,e){for(var i=p.effects.length,s=0;i>s;s++){var o=p.effects[s];if(o.elem.is(t)&&o.type==e)return o}},c.prototype.getElemID=function(t){return t.attr("id")||t.attr(c.TEMP_UID_ATTR)||t.attr(c.TEMP_UID_ATTR,Math.round(1e6*Math.random())).attr(c.TEMP_UID_ATTR)};var p=new c;i.data("scrollEffectsService",p),t.fn.registerPositionScrollEffect=function(e){return t(this).registerGenericScrollEffect(s,e)},t.fn.registerBackgroundPositionScrollEffect=function(e){return t(this).registerGenericScrollEffect(o,e)},t.fn.registerRotateScrollEffect=function(e){return t(this).registerGenericScrollEffect(r,e)},t.fn.registerOpacityScrollEffect=function(e){return t(this).registerGenericScrollEffect(n,e)},t.fn.registerSlideshowScrollEffect=function(e){return t(this).registerGenericScrollEffect(a,e)},t.fn.registerEdgeAnimateScrollEffect=function(e){return t(this).registerGenericScrollEffect(l,e)},t.fn.registerGenericScrollEffect=function(e,i){return p.registerEffect(t(this),e,i),t(this).data("hasScrollEffect",!0),this},t.fn.clearScrollEffects=function(){t(this).data("hasScrollEffect",!1);for(var e=0;e<p.effects.length;)p.effects[e].elem.is(this)?p.effects.splice(e,1):e++},t.fn.cloneScrollEffectsFrom=function(t){for(var e=p.effects.length,i=0;e>i;i++){var s=p.effects[i];s.elem.is(t)&&s.clone&&s.clone(this)}}}(jQuery),function(t){var e=t(window),i=t(document),s=t("html"),o=t("body"),r=t("#page"),n=function(t,e){this.wrapper=t,this.onScrollFn=e,this.type="StandardScrollProvider"};n.prototype.activate=function(){e.scroll(this,this.onUpdate),e.resize(this,this.onUpdate),this.onUpdate()},n.prototype.deactivate=function(){e.off("scroll",this.onUpdate),e.off("resize",this.onUpdate)},n.prototype.scrollTop=function(){return e.scrollTop()},n.prototype.scrollLeft=function(){return e.scrollLeft()},n.prototype.onUpdate=function(t){t=t&&t.data||this,t.onScrollFn(t.scrollLeft(),t.scrollTop())},n.prototype.scrollTo=function(t,e){window.scrollTo(t,e)},n.prototype.scrollHeight=function(){return(document.documentElement||document.body).scrollHeight},n.prototype.scrollWidth=function(){return(document.documentElement||document.body).scrollWidth};var a=function(e,i){this.wrapper=e,this.onScrollFn=i,this.moveStarted=!1,this.animation=null,this.scrollOffset={x:0,y:0},this.speed={x:0,y:0},this.lastTouch={x:0,y:0},this.metaViewPort=t("meta[name=viewport]"),this.enabled=!0,this.type="WebkitScrollProvider",this.touchListeners=[]};a.DECELERATION_RATE=1.5,a.SCALE=1,a.LOCK_X=!1,a.LOCK_Y=!1,a.HTML_WRAPPER_ID="webit_scroll_provider_wrapper",a.IFRAME_BODY_CLASS="WebkitScrollProviderIframeBodyHelperClass",a.IFRAME_DATA="WebkitScrollProviderIframeData",a.prototype.available=function(){return this.enabled&&"ontouchstart"in window&&jQuery.browser.SafariMobile},a.prototype.activate=function(){t("script").remove(),r.wrap('<div id="'+a.HTML_WRAPPER_ID+'" />'),this.htmlWrapper=t("#"+a.HTML_WRAPPER_ID),this.docProps={paddingTop:Muse.Utils.getCSSIntValue(o,"padding-top")+Muse.Utils.getCSSIntValue(o,"margin-top"),paddingBottom:Muse.Utils.getCSSIntValue(o,"padding-bottom")+Muse.Utils.getCSSIntValue(o,"margin-bottom"),paddingLeft:Muse.Utils.getCSSIntValue(r,"margin-left"),paddingRight:Muse.Utils.getCSSIntValue(r,"margin-right")},this.htmlWrapper.css("padding-top",this.docProps.paddingTop),this.htmlWrapper.css("padding-bottom",this.docProps.paddingBottom),this.htmlWrapper.css("width","100%"),this.htmlWrapper.css("min-width",r.outerWidth()),this.htmlWrapper.addClass("html"),s.removeClass("html"),o.addClass("scroll_wrapper"),e.scroll(this,this.onWindowScroll),e.on("orientationchange",this,this.orientationChange),this.addTouchListeners(i),t("input,textarea").on("touchstart",this,this.onElementTouchStart),t("input,textarea").on("focus",this,this.onElementFocus),t("input,textarea").on("blur",this,this.onElementBlur);var n=this;t(".animationContainer").each(function(){var e=t(this);e.load(function(){var i=e.contents();n.addTouchListeners(i),t("body",i).addClass(a.IFRAME_BODY_CLASS),t("body",i).data(a.IFRAME_DATA,e)})})},a.prototype.onElementTouchStart=function(t){t.data.inFormFieldEditMode=!0},a.prototype.onElementFocus=function(t){t=t.data,t.stopTimeout&&(clearTimeout(t.stopTimeout),t.stopTimeout=0)},a.prototype.onElementBlur=function(t){var e=t.data;e.stopTimeout=setTimeout(function(){e.stopTimeout=0,e.inFormFieldEditMode=!1},200)},a.prototype.addTouchListeners=function(t){t.on("touchstart",this,this.touchStartHandler),t.on("touchmove",this,this.touchMoveHandler),t.on("touchend",this,this.touchEndHandler),this.touchListeners.push(t)},a.prototype.removeTouchListeners=function(){for(var t,e=0,i=this.touchListeners.length;i>e;e++)t=this.touchListeners[e],t.off("touchstart",this.touchStartHandler),t.off("touchmove",this.touchMoveHandler),t.off("touchend",this.touchEndHandler);this.touchListeners.splice(0,this.touchListeners.length)},a.prototype.deactivate=function(){e.off("scroll",this.onWindowScroll),e.off("orientationchange",this.orientationChange),this.removeTouchListeners(),o.removeClass("scroll_wrapper"),s.addClass("html"),r.unwrap(),t("input,textarea").off("touchstart",this.onElementTouchStart),t("input,textarea").off("focus",this.onElementFocus),t("input,textarea").off("blur",this.onElementBlur)},a.prototype.onWindowScroll=function(t){var t=t.data,i=e.scrollLeft(),s=e.scrollTop();t.inFormFieldEditMode||0==i&&0==s||(window.scrollTo(0,0),t.scrollTo(i,s))},a.prototype.orientationChange=function(t){t=t.data,t.animation&&t.animation.stop(!1,!1),t.scrollTo(t.scrollOffset.x,t.scrollOffset.y)},a.prototype.canStartScroll=function(t){return!t.tagName.match(/input|textarea|select/i)},a.prototype.getIFrameScrollOffset=function(e){return e=t("body",t(e).parents()),e.hasClass(a.IFRAME_BODY_CLASS)?e.data(a.IFRAME_DATA).offset():void 0},a.prototype.touchStartHandler=function(t){var e=t.data,i=t.originalEvent;Muse.Assert.assert(!e.moveStarted,"Starting touch tracking while already tracking movement?"),e.canStartScroll(t.target)&&(e.animation&&e.animation.stop(!1,!1),e.speed.y=e.speed.x=0,t=e.getIFrameScrollOffset(t.target),e.lastTouch.y=i.targetTouches[0].pageY+(t?t.top:0),e.lastTouch.x=i.targetTouches[0].pageX+(t?t.left:0),e.moveStarted=!0)},a.prototype.touchMoveHandler=function(t){var e=t.data,i=t.originalEvent;t.preventDefault(),e.moveStarted&&(t=e.getIFrameScrollOffset(t.target),e.scrollByDelta(e.lastTouch.x-i.targetTouches[0].pageX-(t?t.left:0),e.lastTouch.y-i.targetTouches[0].pageY-(t?t.top:0)),e.lastTouch.y=i.targetTouches[0].pageY+(t?t.top:0),e.lastTouch.x=i.targetTouches[0].pageX+(t?t.left:0))},a.prototype.touchEndHandler=function(e){var i=e.data;if(i.moveStarted){i.moveStarted=!1;var s=20/a.DECELERATION_RATE,o=i.speed.x,r=i.speed.y,e=(1.71+.002*Math.sqrt(Math.pow(s*o,2)+Math.pow(s*r,2)))/a.DECELERATION_RATE*1e3/1.71,n=0,l=0;i.animation=t({progress:0}).animate({progress:1},{duration:e,easing:"linear",step:function(t){n=i.decelerate(t),i.scrollByDelta(Math.round((n-l)*s*o),Math.round((n-l)*s*r)),l=n}})}},a.prototype.decelerate=function(t){return(1-t)*(1-t)*(1-t)*0+3*(1-t)*(1-t)*t*1+3*(1-t)*t*t*1+t*t*t*1},a.prototype.scrollByDelta=function(t,e){this.scrollTo(a.SCALE*(this.scrollOffset.x+t),a.SCALE*(this.scrollOffset.y+e)),a.LOCK_X||(this.speed.x=.75*t*a.SCALE),a.LOCK_Y||(this.speed.y=.75*e*a.SCALE)},a.prototype.scrollTop=function(){return this.scrollOffset.y},a.prototype.scrollLeft=function(){return this.scrollOffset.x},a.prototype.scrollHeight=function(){return this.htmlWrapper.outerHeight()},a.prototype.scrollWidth=function(){return this.htmlWrapper.outerWidth()},a.prototype.scrollTo=function(t,e){a.LOCK_X||(this.scrollOffset.x=Math.min(Math.max(0,t),Math.max(0,this.scrollWidth()-window.innerWidth))),a.LOCK_Y||(this.scrollOffset.y=Math.min(Math.max(0,e),Math.max(0,this.scrollHeight()-window.innerHeight))),this.speed.x=this.speed.y=0,o.css({top:(a.LOCK_Y?0:-this.scrollOffset.y)+"px",left:(a.LOCK_X?0:-this.scrollOffset.x)+"px"}),this.onScrollFn(0,this.scrollOffset.y)};var l=function(){var t=this;this.updateCallbacks=[],this.STANDARD_PROVIDER=new n(this,function(e,i){t.onScroll(e,i)}),this.WEBKIT_PROVIDER=new a(this,function(e,i){t.onScroll(e,i)}),this.provider=this.getProvider(),this.provider.activate()};l.prototype.onScroll=function(t,e){for(var i=0,s=this.updateCallbacks.length;s>i;i++)this.updateCallbacks[i](t,e)},l.prototype.getProvider=function(){return this.WEBKIT_PROVIDER.available()?this.WEBKIT_PROVIDER:this.STANDARD_PROVIDER},l.prototype.registerUpdateCallback=function(t){this.updateCallbacks.push(t)},l.prototype.isStandard=function(){return this.STANDARD_PROVIDER===this.getProvider()},l.prototype.scrollTop=function(){return this.provider.scrollTop()},l.prototype.scrollLeft=function(){return this.provider.scrollLeft()},l.prototype.scrollTo=function(t,e){this.provider.scrollTo(t,e)},l.prototype.scrollHeight=function(){return this.provider.scrollHeight()},l.prototype.scrollWidth=function(){return this.provider.scrollWidth()},i.ready(function(){var t=e.data("scrollEffectsService"),i=new l;i.registerUpdateCallback(function(e,i){t.onUpdate(e,i)}),e.data("scrollWrapper",i),i.onScroll(i.scrollLeft(),i.scrollTop())})}(jQuery),function(){if("undefined"!=typeof Muse&&"undefined"!=typeof Muse.assets){var t=function(t,e){for(var i=0,s=t.length;s>i;i++)if(t[i]==e)return i;return-1}(Muse.assets.required,"jquery.scrolleffects.js");if(-1!=t){Muse.assets.required.splice(t,1);for(var t=document.getElementsByTagName("meta"),e=0,i=t.length;i>e;e++){var s=t[e];if("generator"==s.getAttribute("name")){"2014.1.1.276"!=s.getAttribute("content")&&Muse.assets.outOfDate.push("jquery.scrolleffects.js");break}}}}}();